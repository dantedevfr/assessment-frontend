<div class="space-y-6">

    <!-- Subtipo si es pregunta -->
      <label class="block text-sm font-medium mb-1">Tipo de pregunta</label>
        <p-select
        [options]="questionTypes"
        [ngModel]="question.type"
        (ngModelChange)="onQuestionTypeChange($event)"
        optionLabel="label"
        optionValue="value"
        class="w-full"
        placeholder="Selecciona tipo"
        />


  <!-- 🎥 Menú de iconos multimedia -->
  <div class="flex items-center gap-4 mb-4">
    <p-button
      icon="pi pi-image"
      [rounded]="true"
      [text]="true"
      pTooltip="Agregar imagen"
      (onClick)="toggleMediaType('image')"
      [severity]="selectedMediaType === 'image' ? 'primary' : 'secondary'"
    />
    <p-button
      icon="pi pi-video"
      [rounded]="true"
      [text]="true"
      pTooltip="Agregar video"
      (onClick)="toggleMediaType('video')"
      [severity]="selectedMediaType === 'video' ? 'primary' : 'secondary'"
    />
    <p-button
      icon="pi pi-volume-up"
      [rounded]="true"
      [text]="true"
      pTooltip="Agregar audio"
      (onClick)="toggleMediaType('audio')"
      [severity]="selectedMediaType === 'audio' ? 'primary' : 'secondary'"
    />
    <p-button
      icon="pi pi-align-left"
      [rounded]="true"
      [text]="true"
      pTooltip="Solo texto"
      (onClick)="clearMedia()"
      [severity]="!selectedMediaType ? 'primary' : 'secondary'"
    />
  </div>

  <!-- ✍️ Texto de la pregunta -->
  <div>
    <label class="block text-sm font-medium mb-1">Texto de la pregunta</label>
    <p-editor
      [ngModel]="question.text"
      (ngModelChange)="updateField('text', $event)"
      [style]="editorStyle"
    ></p-editor>
  </div>

  <!-- 📦 Selector de posición de media -->
  <div *ngIf="selectedMediaType">
    <label class="block text-sm font-medium mb-1">Posición del medio</label>
    <p-select
      [options]="mediaPositions"
      [ngModel]="mediaPosition"
      (ngModelChange)="onMediaPositionChange($event)"
      optionLabel="label"
      optionValue="value"
      class="w-full"
    />
  </div>

  <!-- 📤 Carga de componente multimedia según tipo -->
<div *ngIf="selectedMediaType === 'image'">
  <app-common-image-uploader
    [imageUrl]="getImageUrl()"
    (imageChange)="onImageChanged($event)"
  />
</div>

<div *ngIf="selectedMediaType === 'audio'">
  <app-common-audio-uploader
    [audioUrl]="getAudioUrl()"
    [audioStart]="0"
    [audioEnd]="null"
    [waveOptions]="{
      waveColor: '#F97316',
      progressColor: '#EA580C',
      height: 100
    }"
    (audioChange)="onAudioChanged($event)"
    (regionChange)="onAudioRegionChanged($event)"
    (waveformReady)="onWaveformReady()"
  />
</div>

  <!-- 📝 Descripción opcional -->
  <div>
    <label class="block text-sm font-medium mb-1">Descripción</label>
    <textarea
      pTextarea
      rows="3"
      [ngModel]="question.description"
      (ngModelChange)="updateField('description', $event)"
      class="w-full"
    ></textarea>
  </div>

  <!-- 🔔 ¿Es obligatoria? -->
  <div class="flex items-center gap-2">
    <label class="block text-sm font-medium">¿Es obligatoria?</label>
    <p-toggleSwitch
      [ngModel]="question.isMandatory"
      (ngModelChange)="updateField('isMandatory', $event)"
    />
  </div>

  <!-- 🌎 Mostrar opción de traducción -->
  <div class="flex items-center gap-2">
    <label class="block text-sm font-medium">¿Agregar traducción?</label>
    <p-toggleSwitch [(ngModel)]="showTranslation" />
  </div>

  <!-- 🌟 Componente de traducción -->
  <app-question-builder-translation
    [showTranslation]="showTranslation"
    [showWordModal]="showWordModal"
    [translationText]="getTranslationText()"
    [tempWordBreakdown]="tempWordBreakdown"
    [textHasChanged]="textHasChanged"
    [expandedWordIds]="expandedWordIds"
    (translationTextChange)="updateTranslation($event)"
    (openWordTranslationModal)="openWordTranslationModal()"
    (saveWordTranslation)="onSaveWordTranslation($event)"
    (cancelWordTranslation)="cancelWordTranslation()"
    (regenerateWordBreakdown)="regenerateWordBreakdown()"
    (toggleExpandWord)="toggleExpandWord($event)"
    (wordMediaSelect)="onWordMediaSelect($event.event, $event.word)"
  />
  <label class="block text-sm font-medium mb-1">Answers</label>

  <app-question-builder-answer
  [question]="question"
  (questionChange)="onAnswersChange($event)"
/>


</div>
