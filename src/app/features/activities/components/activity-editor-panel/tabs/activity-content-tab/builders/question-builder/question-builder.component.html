<div class="space-y-6">

  <!-- 🎥 Menú de iconos multimedia -->
  <div class="flex items-center gap-4 mb-4">
    <p-button 
      icon="pi pi-image" 
      [rounded]="true" 
      [text]="true" 
      pTooltip="Agregar imagen" 
      (onClick)="toggleMediaType('image')" 
      [severity]="selectedMediaType === 'image' ? 'primary' : 'secondary'" 
    />
    <p-button 
      icon="pi pi-video" 
      [rounded]="true" 
      [text]="true" 
      pTooltip="Agregar video" 
      (onClick)="toggleMediaType('video')" 
      [severity]="selectedMediaType === 'video' ? 'primary' : 'secondary'" 
    />
    <p-button 
      icon="pi pi-volume-up" 
      [rounded]="true" 
      [text]="true" 
      pTooltip="Agregar audio" 
      (onClick)="toggleMediaType('audio')" 
      [severity]="selectedMediaType === 'audio' ? 'primary' : 'secondary'" 
    />
    <p-button 
      icon="pi pi-align-left" 
      [rounded]="true" 
      [text]="true" 
      pTooltip="Solo texto" 
      (onClick)="clearMedia()" 
      [severity]="!selectedMediaType ? 'primary' : 'secondary'" 
    />
  </div>

  <!-- ✍️ Texto de la pregunta -->
  <div>
    <label class="block text-sm font-medium mb-1">Texto de la pregunta</label>
    <p-editor
      [ngModel]="question.text"
      (ngModelChange)="updateField('text', $event)"
      [style]="editorStyle"
    ></p-editor>
  </div>

  <!-- 📦 Selector de posición de media -->
  <div *ngIf="uploadedFiles.length > 0">
    <label class="block text-sm font-medium mb-1">Posición del medio</label>
    <p-select
      [options]="mediaPositions"
      [ngModel]="mediaPosition"
      (ngModelChange)="onMediaPositionChange($event)"
      optionLabel="label"
      optionValue="value"
      class="w-full"
    />
  </div>

  <!-- 📤 Upload de archivo -->
  <div *ngIf="selectedMediaType">
    <p-fileupload
      #fileUploader
      name="demo[]"
      url="https://www.primefaces.org/cdn/api/upload.php"
      (onUpload)="onUpload($event)"
      (onSelect)="onFileSelect(fileUploader.files)"
      (onClear)="onClearUpload()"
      (onRemove)="onClearUpload()"
      [multiple]="false"
      [accept]="mediaAcceptType"
      maxFileSize="1000000"
      mode="advanced"
    >
      <ng-template #empty>
        <div>Arrastra los archivos aquí para subirlos.</div>
      </ng-template>
      <ng-template #content>
        <ul *ngIf="uploadedFiles.length">
          <li *ngFor="let file of uploadedFiles">
            {{ file.name }} - {{ file.size }} bytes
          </li>
        </ul>
      </ng-template>
    </p-fileupload>
  </div>

  <!-- 📝 Descripción opcional -->
  <div>
    <label class="block text-sm font-medium mb-1">Descripción</label>
    <textarea
      pTextarea
      rows="3"
      [ngModel]="question.description"
      (ngModelChange)="updateField('description', $event)"
      class="w-full"
    ></textarea>
  </div>

  <!-- 🔔 ¿Es obligatoria? -->
  <div class="flex items-center gap-2">
    <label class="block text-sm font-medium">¿Es obligatoria?</label>
    <p-toggleSwitch
      [ngModel]="question.isMandatory"
      (ngModelChange)="updateField('isMandatory', $event)"
    />
  </div>

  <!-- 🌎 Mostrar opción de traducción -->
  <div class="flex items-center gap-2">
    <label class="block text-sm font-medium">¿Agregar traducción?</label>
    <p-toggleSwitch [(ngModel)]="showTranslation" />
  </div>

  <p-divider type="solid" />

  <!-- 🌟 Componente de traducción -->
  <app-question-builder-translation
    [showTranslation]="showTranslation"
    [showWordModal]="showWordModal"
    [translationText]="getTranslationText()"
    [tempWordBreakdown]="tempWordBreakdown"
    [textHasChanged]="textHasChanged"
    [expandedWordIds]="expandedWordIds"
    (translationTextChange)="updateTranslation($event)"
    (openWordTranslationModal)="openWordTranslationModal()"
    (saveWordTranslation)="saveWordTranslation()"
    (cancelWordTranslation)="cancelWordTranslation()"
    (regenerateWordBreakdown)="regenerateWordBreakdown()"
    (toggleExpandWord)="toggleExpandWord($event)"
    (wordMediaSelect)="onWordMediaSelect($event.event, $event.word)"
  />

</div>
