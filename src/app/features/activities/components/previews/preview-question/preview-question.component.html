<!-- preview-question.component.html -->
<div class="config-panel grid grid-cols-2 md:grid-cols-3 gap-4 mb-6 bg-white p-4 rounded shadow">
  <label>
    Columnas del grid:
    <input type="number" class="w-full p-1 border rounded"
           [(ngModel)]="layoutConfig.gridColumns"
           (ngModelChange)="updateConfig()" min="1" max="24" />
  </label>

  <label>
    Espaciado entre bloques:
    <input type="number" class="w-full p-1 border rounded"
           [(ngModel)]="layoutConfig.gridGap"
           (ngModelChange)="updateConfig()" />
  </label>

  <label>
    Padding global:
    <input type="number" class="w-full p-1 border rounded"
           [(ngModel)]="layoutConfig.padding"
           (ngModelChange)="updateConfig()" />
  </label>

  <label>
    Color de fondo:
    <input type="color" class="w-full h-10"
           [(ngModel)]="layoutConfig.backgroundColor"
           (ngModelChange)="updateConfig()" />
  </label>

  <label>
    Animar al cargar:
    <input type="checkbox"
           [(ngModel)]="layoutConfig.animateOnLoad"
           (ngModelChange)="updateConfig()" />
  </label>

  <label>
    Ambiente habilitado:
    <input type="checkbox"
           [(ngModel)]="layoutConfig.ambientEnabled"
           (ngModelChange)="updateConfig()" />
  </label>
</div>

<div class="grid-editor"
     [ngStyle]="getGridStyles()"
     cdkDropList
     (cdkDropListDropped)="onDrop($event)">
  <ng-container *ngFor="let block of layoutConfig.blocks">
    <div class="grid-block"
         cdkDrag
         [cdkDragData]="block"
         [ngStyle]="getBlockGridStyle(block)"
         [ngClass]="getBlockClasses(block)"
         (click)="selectBlock(block)">
      <div class="block-header">{{ block.type.toUpperCase() }}</div>
      <div class="block-body" [innerHTML]="getBlockContent(block)"></div>
    </div>
  </ng-container>
</div>

<!-- Configurador contextual -->
<div *ngIf="selectedBlock" class="block-settings mt-6 p-4 border rounded bg-white shadow">
  <h4 class="text-lg font-semibold mb-4">Configurar: {{ selectedBlock.type.toUpperCase() }}</h4>

  <div class="grid grid-cols-2 gap-4">
    <label>
      Columna de inicio:
      <input type="number" [(ngModel)]="selectedBlock.position.colStart" (ngModelChange)="updateConfig()" class="w-full border p-1 rounded" />
    </label>

    <label>
      Columnas que ocupa:
      <input type="number" [(ngModel)]="selectedBlock.position.colSpan" (ngModelChange)="updateConfig()" class="w-full border p-1 rounded" />
    </label>

    <label>
      Fila:
      <input type="number" [(ngModel)]="selectedBlock.position.rowStart" (ngModelChange)="updateConfig()" class="w-full border p-1 rounded" />
    </label>

    <label>
      Ancho:
      <select [(ngModel)]="selectedBlock.style.width" (ngModelChange)="updateConfig()" class="w-full border p-1 rounded">
        <option value="auto">Auto</option>
        <option value="fit">Ajustado</option>
        <option value="full">Completo</option>
      </select>
    </label>

    <label>
      Alineaci√≥n:
      <select [(ngModel)]="selectedBlock.style.alignSelf" (ngModelChange)="updateConfig()" class="w-full border p-1 rounded">
        <option value="start">Inicio</option>
        <option value="center">Centro</option>
        <option value="end">Final</option>
        <option value="stretch">Estirar</option>
      </select>
    </label>
  </div>
</div>
